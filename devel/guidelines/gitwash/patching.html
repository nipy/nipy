<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Neuroimaging in Python &#8212; NIPY Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/nipy.css?v=b92af819" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />
    <script src="../../../_static/documentation_options.js?v=0073ef5f"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Git for development" href="git_development.html" />
    <link rel="prev" title="Following the latest source" href="following_latest.html" />
  <meta name="keywords" content="nipy, neuroimaging, python, neuroscience, time
				 series">

  </head><body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../../../index.html">
  <img src="../../../_static/reggie2.png" alt="NIPY logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="git_development.html" title="Git for development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="following_latest.html" title="Following the latest source"
             accesskey="P">previous</a> |</li>
  <li><a href="../../../index.html">NIPY home</a> |&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../../../documentation.html" >NIPY documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../index.html" >Developer Guide</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Development Guidelines</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" accesskey="U">Working with <em>nipy</em> source code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Neuroimaging in Python</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="making-a-patch">
<h1>Making a patch<a class="headerlink" href="#making-a-patch" title="Link to this heading">¶</a></h1>
<p>You’ve discovered a bug or something else you want to change
in <a href="#id4"><span class="problematic" id="id5">`nipy`_</span></a> .. — excellent!</p>
<p>You’ve worked out a way to fix it — even better!</p>
<p>You want to tell us about it — best of all!</p>
<p>The easiest way is to make a <em>patch</em> or set of patches.  Here
we explain how.  Making a patch is the simplest and quickest,
but if you’re going to be doing anything more than simple
quick things, please consider following the
<a class="reference internal" href="git_development.html#git-development"><span class="std std-ref">Git for development</span></a> model instead.</p>
<section id="making-patches">
<span id="id1"></span><h2>Making patches<a class="headerlink" href="#making-patches" title="Link to this heading">¶</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># tell git who you are</span>
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.email<span class="w"> </span>you@yourdomain.example.com
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.name<span class="w"> </span><span class="s2">&quot;Your Name Comes Here&quot;</span>
<span class="c1"># get the repository if you don&#39;t have it</span>
git<span class="w"> </span>clone<span class="w"> </span>git://github.com/nipy/nipy.git
<span class="c1"># make a branch for your patching</span>
<span class="nb">cd</span><span class="w"> </span>nipy
git<span class="w"> </span>branch<span class="w"> </span>the-fix-im-thinking-of
git<span class="w"> </span>checkout<span class="w"> </span>the-fix-im-thinking-of
<span class="c1"># hack, hack, hack</span>
<span class="c1"># Tell git about any new files you&#39;ve made</span>
git<span class="w"> </span>add<span class="w"> </span>somewhere/tests/test_my_bug.py
<span class="c1"># commit work in progress as you go</span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s1">&#39;BF - added tests for Funny bug&#39;</span>
<span class="c1"># hack hack, hack</span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s1">&#39;BF - added fix for Funny bug&#39;</span>
<span class="c1"># make the patch files</span>
git<span class="w"> </span>format-patch<span class="w"> </span>-M<span class="w"> </span>-C<span class="w"> </span>main
</pre></div>
</div>
<p>Then, send the generated patch files to the <a class="reference external" href="https://mail.python.org/mailman/listinfo/neuroimaging">nipy
mailing list</a> — where we will thank you warmly.</p>
</section>
<section id="in-detail">
<h3>In detail<a class="headerlink" href="#in-detail" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Tell git who you are so it can label the commits you’ve
made:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.email<span class="w"> </span>you@yourdomain.example.com
git<span class="w"> </span>config<span class="w"> </span>--global<span class="w"> </span>user.name<span class="w"> </span><span class="s2">&quot;Your Name Comes Here&quot;</span>
</pre></div>
</div>
</li>
<li><p>If you don’t already have one, clone a copy of the
<a href="#id6"><span class="problematic" id="id7">`nipy`_</span></a> repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git://github.com/nipy/nipy.git
<span class="nb">cd</span><span class="w"> </span>nipy
</pre></div>
</div>
</li>
<li><p>Make a ‘feature branch’.  This will be where you work on
your bug fix.  It’s nice and safe and leaves you with
access to an unmodified copy of the code in the main
branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>branch<span class="w"> </span>the-fix-im-thinking-of
git<span class="w"> </span>checkout<span class="w"> </span>the-fix-im-thinking-of
</pre></div>
</div>
</li>
<li><p>Do some edits, and commit them as you go:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># hack, hack, hack</span>
<span class="c1"># Tell git about any new files you&#39;ve made</span>
git<span class="w"> </span>add<span class="w"> </span>somewhere/tests/test_my_bug.py
<span class="c1"># commit work in progress as you go</span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s1">&#39;BF - added tests for Funny bug&#39;</span>
<span class="c1"># hack hack, hack</span>
git<span class="w"> </span>commit<span class="w"> </span>-am<span class="w"> </span><span class="s1">&#39;BF - added fix for Funny bug&#39;</span>
</pre></div>
</div>
<p>Note the <code class="docutils literal notranslate"><span class="pre">-am</span></code> options to <code class="docutils literal notranslate"><span class="pre">commit</span></code>. The <code class="docutils literal notranslate"><span class="pre">m</span></code> flag just
signals that you’re going to type a message on the command
line.  The <code class="docutils literal notranslate"><span class="pre">a</span></code> flag — you can just take on faith —
or see <a class="reference external" href="http://gitready.com/beginner/2009/01/18/the-staging-area.html">why the -a flag?</a>.</p>
</li>
<li><p>When you have finished, check you have committed all your
changes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>status
</pre></div>
</div>
</li>
<li><p>Finally, make your commits into patches.  You want all the
commits since you branched from the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>format-patch<span class="w"> </span>-M<span class="w"> </span>-C<span class="w"> </span>main
</pre></div>
</div>
<p>You will now have several files named for the commits:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0001-BF-added-tests-for-Funny-bug.patch
0002-BF-added-fix-for-Funny-bug.patch
</pre></div>
</div>
<p>Send these files to the <a class="reference external" href="https://mail.python.org/mailman/listinfo/neuroimaging">nipy mailing list</a>.</p>
</li>
</ol>
<p>When you are done, to switch back to the main copy of the
code, just return to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>main
</pre></div>
</div>
</section>
</section>
<section id="moving-from-patching-to-development">
<h2>Moving from patching to development<a class="headerlink" href="#moving-from-patching-to-development" title="Link to this heading">¶</a></h2>
<p>If you find you have done some patches, and you have one or
more feature branches, you will probably want to switch to
development mode.  You can do this with the repository you
have.</p>
<p>Fork the <a href="#id8"><span class="problematic" id="id9">`nipy`_</span></a> repository on github — <a class="reference internal" href="forking_hell.html#forking"><span class="std std-ref">Making your own copy (fork) of nipy</span></a>.
Then:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># checkout and refresh main branch from main repo</span>
git<span class="w"> </span>checkout<span class="w"> </span>main
git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>main
<span class="c1"># rename pointer to main repository to &#39;upstream&#39;</span>
git<span class="w"> </span>remote<span class="w"> </span>rename<span class="w"> </span>origin<span class="w"> </span>upstream
<span class="c1"># point your repo to default read / write to your fork on github</span>
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>git@github.com:your-user-name/nipy.git
<span class="c1"># push up any branches you&#39;ve made and want to keep</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>the-fix-im-thinking-of
</pre></div>
</div>
<p>Then you can, if you want, follow the
<a class="reference internal" href="development_workflow.html#development-workflow"><span class="std std-ref">Development workflow</span></a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Site Navigation </h4>
  <ul>
    <li><a href="../../../documentation.html">Documentation</a></li>
    <li><a href="../../index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/project-directory">NIPY Projects</a></li>
    <li><a class="reference external"
	href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing List</a></li>
    <li><a class="reference external"
	href="license.html">License</a></li>
  </ul>

<h4> Github repo </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://github.com/nipy/nipy/">Nipy Github</a></li>
  </ul>

  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Making a patch</a><ul>
<li><a class="reference internal" href="#making-patches">Making patches</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#in-detail">In detail</a></li>
</ul>
</li>
<li><a class="reference internal" href="#moving-from-patching-to-development">Moving from patching to development</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="following_latest.html"
                          title="previous chapter">Following the latest source</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="git_development.html"
                          title="next chapter">Git for development</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/devel/guidelines/gitwash/patching.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="git_development.html" title="Git for development"
             >next</a> |</li>
        <li class="right" >
          <a href="following_latest.html" title="Following the latest source"
             >previous</a> |</li>
  <li><a href="../../../index.html">NIPY home</a> |&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../../../documentation.html" >NIPY documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../index.html" >Developer Guide</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" >Development Guidelines</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="index.html" >Working with <em>nipy</em> source code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Neuroimaging in Python</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2005-2023, Neuroimaging in Python team.
      Last updated on Feb 20, 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>